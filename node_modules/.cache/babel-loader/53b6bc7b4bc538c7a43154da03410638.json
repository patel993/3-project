{"ast":null,"code":"import _slicedToArray from\"/home/xlandroid1/Desktop/react data/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useEffect,useState}from\"react\";import{DataGrid}from\"@material-ui/data-grid\";import\"./productReviews.css\";import{useSelector,useDispatch}from\"react-redux\";import{clearErrors,getAllReviews,deleteReviews}from\"../../actions/productAction\";import{useAlert}from\"react-alert\";import{Button}from\"@material-ui/core\";import MetaData from\"../layout/MetaData\";import DeleteIcon from\"@material-ui/icons/Delete\";import Star from\"@material-ui/icons/Star\";import SideBar from\"./Sidebar\";import{DELETE_REVIEW_RESET}from\"../../constants/productConstants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductReviews=function ProductReviews(_ref){var history=_ref.history;var dispatch=useDispatch();var alert=useAlert();var _useSelector=useSelector(function(state){return state.review;}),deleteError=_useSelector.error,isDeleted=_useSelector.isDeleted;var _useSelector2=useSelector(function(state){return state.productReviews;}),error=_useSelector2.error,reviews=_useSelector2.reviews,loading=_useSelector2.loading;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),productId=_useState2[0],setProductId=_useState2[1];var deleteReviewHandler=function deleteReviewHandler(reviewId){dispatch(deleteReviews(reviewId,productId));};var productReviewsSubmitHandler=function productReviewsSubmitHandler(e){e.preventDefault();dispatch(getAllReviews(productId));};useEffect(function(){if(productId.length===24){dispatch(getAllReviews(productId));}if(error){alert.error(error);dispatch(clearErrors());}if(deleteError){alert.error(deleteError);dispatch(clearErrors());}if(isDeleted){alert.success(\"Review Deleted Successfully\");history.push(\"/admin/reviews\");dispatch({type:DELETE_REVIEW_RESET});}},[dispatch,alert,error,deleteError,history,isDeleted,productId]);var columns=[{field:\"id\",headerName:\"Review ID\",minWidth:200,flex:0.5},{field:\"user\",headerName:\"User\",minWidth:200,flex:0.6},{field:\"comment\",headerName:\"Comment\",minWidth:350,flex:1},{field:\"rating\",headerName:\"Rating\",type:\"number\",minWidth:180,flex:0.4,cellClassName:function cellClassName(params){return params.getValue(params.id,\"rating\")>=3?\"greenColor\":\"redColor\";}},{field:\"actions\",flex:0.3,headerName:\"Actions\",minWidth:150,type:\"number\",sortable:false,renderCell:function renderCell(params){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return deleteReviewHandler(params.getValue(params.id,\"id\"));},children:/*#__PURE__*/_jsx(DeleteIcon,{})})});}}];var rows=[];reviews&&reviews.forEach(function(item){rows.push({id:item._id,rating:item.rating,comment:item.comment,user:item.name});});return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"ALL REVIEWS - Admin\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(SideBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"productReviewsContainer\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"productReviewsForm\",onSubmit:productReviewsSubmitHandler,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"productReviewsFormHeading\",children:\"ALL REVIEWS\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Star,{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Product Id\",required:true,value:productId,onChange:function onChange(e){return setProductId(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{id:\"createProductBtn\",type:\"submit\",disabled:loading?true:false||productId===\"\"?true:false,children:\"Search\"})]}),reviews&&reviews.length>0?/*#__PURE__*/_jsx(DataGrid,{rows:rows,columns:columns,pageSize:10,disableSelectionOnClick:true,className:\"productListTable\",autoHeight:true}):/*#__PURE__*/_jsx(\"h1\",{className:\"productReviewsFormHeading\",children:\"No Reviews Found\"})]})]})]});};export default ProductReviews;","map":{"version":3,"sources":["/home/xlandroid1/Desktop/react data/frontend/src/component/Admin/ProductReviews.js"],"names":["React","Fragment","useEffect","useState","DataGrid","useSelector","useDispatch","clearErrors","getAllReviews","deleteReviews","useAlert","Button","MetaData","DeleteIcon","Star","SideBar","DELETE_REVIEW_RESET","ProductReviews","history","dispatch","alert","state","review","deleteError","error","isDeleted","productReviews","reviews","loading","productId","setProductId","deleteReviewHandler","reviewId","productReviewsSubmitHandler","e","preventDefault","length","success","push","type","columns","field","headerName","minWidth","flex","cellClassName","params","getValue","id","sortable","renderCell","rows","forEach","item","_id","rating","comment","user","name","target","value"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\nimport { DataGrid } from \"@material-ui/data-grid\";\nimport \"./productReviews.css\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  clearErrors,\n  getAllReviews,\n  deleteReviews,\n} from \"../../actions/productAction\";\nimport { useAlert } from \"react-alert\";\nimport { Button } from \"@material-ui/core\";\nimport MetaData from \"../layout/MetaData\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Star from \"@material-ui/icons/Star\";\n\nimport SideBar from \"./Sidebar\";\nimport { DELETE_REVIEW_RESET } from \"../../constants/productConstants\";\n\nconst ProductReviews = ({ history }) => {\n  const dispatch = useDispatch();\n\n  const alert = useAlert();\n\n  const { error: deleteError, isDeleted } = useSelector(\n    (state) => state.review\n  );\n\n  const { error, reviews, loading } = useSelector(\n    (state) => state.productReviews\n  );\n\n  const [productId, setProductId] = useState(\"\");\n\n  const deleteReviewHandler = (reviewId) => {\n    dispatch(deleteReviews(reviewId, productId));\n  };\n\n  const productReviewsSubmitHandler = (e) => {\n    e.preventDefault();\n    dispatch(getAllReviews(productId));\n  };\n\n  useEffect(() => {\n    if (productId.length === 24) {\n      dispatch(getAllReviews(productId));\n    }\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (deleteError) {\n      alert.error(deleteError);\n      dispatch(clearErrors());\n    }\n\n    if (isDeleted) {\n      alert.success(\"Review Deleted Successfully\");\n      history.push(\"/admin/reviews\");\n      dispatch({ type: DELETE_REVIEW_RESET });\n    }\n  }, [dispatch, alert, error, deleteError, history, isDeleted, productId]);\n\n  const columns = [\n    { field: \"id\", headerName: \"Review ID\", minWidth: 200, flex: 0.5 },\n\n    {\n      field: \"user\",\n      headerName: \"User\",\n      minWidth: 200,\n      flex: 0.6,\n    },\n\n    {\n      field: \"comment\",\n      headerName: \"Comment\",\n      minWidth: 350,\n      flex: 1,\n    },\n\n    {\n      field: \"rating\",\n      headerName: \"Rating\",\n      type: \"number\",\n      minWidth: 180,\n      flex: 0.4,\n\n      cellClassName: (params) => {\n        return params.getValue(params.id, \"rating\") >= 3\n          ? \"greenColor\"\n          : \"redColor\";\n      },\n    },\n\n    {\n      field: \"actions\",\n      flex: 0.3,\n      headerName: \"Actions\",\n      minWidth: 150,\n      type: \"number\",\n      sortable: false,\n      renderCell: (params) => {\n        return (\n          <Fragment>\n            <Button\n              onClick={() =>\n                deleteReviewHandler(params.getValue(params.id, \"id\"))\n              }\n            >\n              <DeleteIcon />\n            </Button>\n          </Fragment>\n        );\n      },\n    },\n  ];\n\n  const rows = [];\n\n  reviews &&\n    reviews.forEach((item) => {\n      rows.push({\n        id: item._id,\n        rating: item.rating,\n        comment: item.comment,\n        user: item.name,\n      });\n    });\n\n  return (\n    <Fragment>\n      <MetaData title={`ALL REVIEWS - Admin`} />\n\n      <div className=\"dashboard\">\n        <SideBar />\n        <div className=\"productReviewsContainer\">\n          <form\n            className=\"productReviewsForm\"\n            onSubmit={productReviewsSubmitHandler}\n          >\n            <h1 className=\"productReviewsFormHeading\">ALL REVIEWS</h1>\n\n            <div>\n              <Star />\n              <input\n                type=\"text\"\n                placeholder=\"Product Id\"\n                required\n                value={productId}\n                onChange={(e) => setProductId(e.target.value)}\n              />\n            </div>\n\n            <Button\n              id=\"createProductBtn\"\n              type=\"submit\"\n              disabled={\n                loading ? true : false || productId === \"\" ? true : false\n              }\n            >\n              Search\n            </Button>\n          </form>\n\n          {reviews && reviews.length > 0 ? (\n            <DataGrid\n              rows={rows}\n              columns={columns}\n              pageSize={10}\n              disableSelectionOnClick\n              className=\"productListTable\"\n              autoHeight\n            />\n          ) : (\n            <h1 className=\"productReviewsFormHeading\">No Reviews Found</h1>\n          )}\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default ProductReviews;\n"]},"metadata":{},"sourceType":"module"}